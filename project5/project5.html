<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 5</title>
    <link rel="stylesheet" href="project5.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Avenir+Next:wght@300&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Halcom&display=swap">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
</head>
<body>
    <!-- Back to Home Button -->
    <a href="../index.html" class="back-button">Back to Home</a>

    <!-- Main Content Container -->
    <div class="content">
        <!-- Title and Description Section -->
        <div class="description">
            <h1>Project 5 Title</h1>
            <p>Project 5 description goes here. Add details about the project to give context and background information.</p>
        </div>

        <!-- Product Photo Section -->
        <div class="product-photo">
            <img src="project5pic.png" alt="Project 5 Product Photo">
        </div>

        <!-- Video Section -->
        <div class="video-container">
            <video controls>
                <source src="Gizmo2024.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <!-- PDF Section -->
        <div id="pdf-container" class="pdf-container">
            <p class="loading">Loading PDF...</p>
        </div>
    </div>

    <script>
        const pdfUrl = 'InteractiveBoardgameDesign.pdf'; // 确保文件名正确
        const container = document.getElementById('pdf-container');
        const loadingText = document.querySelector('.loading');

        // 加载 PDF 文件
        pdfjsLib.getDocument(pdfUrl).promise.then(function (pdf) {
            loadingText.textContent = `Rendering page 1 of ${pdf.numPages}...`;

            let currentPage = 1;

            const renderPage = (pageNum) => {
                pdf.getPage(pageNum).then(function (page) {
                    const viewport = page.getViewport({ scale: 1.0 });
                    const canvas = document.createElement('canvas');
                    const context = canvas.getContext('2d');
                    canvas.width = viewport.width;
                    canvas.height = viewport.height;

                    const renderContext = {
                        canvasContext: context,
                        viewport: viewport,
                    };

                    page.render(renderContext).promise.then(function () {
                        const img = document.createElement('img');
                        img.src = canvas.toDataURL('image/png'); // 转换为图片格式
                        img.style.margin = "0.5mm 0"; // 设置图片上下间隔
                        container.appendChild(img);

                        if (pageNum < pdf.numPages) {
                            loadingText.textContent = `Rendering page ${pageNum + 1} of ${pdf.numPages}...`;
                            renderPage(pageNum + 1);
                        } else {
                            loadingText.style.display = 'none'; // 所有页面加载完成后隐藏加载文字
                        }
                    });
                });
            };

            renderPage(1); // 从第一页开始渲染
        }).catch(function (error) {
            console.error('Error loading PDF:', error);
            loadingText.textContent = 'Failed to load PDF.';
        });
    </script>
</body>
</html>
